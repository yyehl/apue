# 15IPC

进程间的通信机制

* **管道**：pipe，又称为匿名管道，无名管道

特点：
1）半双工的，基于无结构数据流，数据只能一个方向流动
2）只存在与内存，只能在有血缘关系的进程间使用
3）当数据一旦被读取后就被抛弃，释放空间
使用方式：
4）通常管道由一个进程通过pipe函数创建，然后调用fork函数，父进程关闭读或写，子进程关闭写或读，这个管道就能在父子进程之间使用了。
注意事项：
5）当写端不在了，读端把缓存区的数据读完后返回
6）当读端不在了，写端产生信号，从信号处理程序返回
7）当管道被写满，写端阻塞，直到读端读取部分数据后才继续写入
8）当管道被读完，为空，则读端阻塞，知道写端写入数据


* **FIFO**：有名管道

特点：
1）FIFO有名管道可以在多个不相关进程间使用；匿名管道只能在有血缘关系的两个进程间使用
2）FIFO存在文件系统，是一种特殊的fifo文件，只要进程能访问该文件路径，则可以使用FIFO进行通信；匿名管道存在与内存，实质为一段内核缓冲区
3）可以设置阻塞标识，设置阻塞时，当没有写端，读端会等待直到有写端来；设置不阻塞时，当没有写端，读端直接返回。
使用方式：
4）创建：mkfifo；打开：open；读：read；写：write；关闭：close；删除：unlink


* **消息队列**

特点：
1）消息队列是消息的链接表，存在与内核，由消息队列标识符标识
2）进程通过往消息队列放入消息和读取消息来进行通信
3）读取消息可以按需读取，克服了管道的先进先出读取
使用方式：
4）创建/打开：msgget；添加消息：msgsnd；收取消息：msgrcv；控制队列：msgctl

* **共享存储**

特点：
1）使得多个进程可以访问内存中的一段空间，是最快的IPC机制
2）共享内存有共享内存标识符标识
3）多个进程同时读写时需要同步机制
使用方式
4）创建：shmget；控制：shmctl；连接：shmat；删除：shmdt

* **信号量**

特点：
1）信号量本质上是一种进程间同步机制，不是为了传输数据
2）信号量可以管理一个或多个资源
3）信号量初始化为资源的个数，当资源被获取，信号量-1，资源被返回，信号量+1
4）当信号量小于等于0时，获取请求不被批准，但是信号量仍-1，当有资源被返回时，信号量+1，并告知其中一个进程；小于0时信号量的绝对值表示目前等待获取资源的进程数

* ****
* ****
* ****
* ****
* ****
* ****
* ****
* ***** ****
* ****
* ****
* ****
* ****
* ****
* ****

